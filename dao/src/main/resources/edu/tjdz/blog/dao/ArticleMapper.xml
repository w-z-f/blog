<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.tjdz.blog.dao.ArticleMapper">
  <resultMap id="BaseResultMap" type="edu.tjdz.blog.beans.bean.Article">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 25 14:17:15 CST 2021.
    -->

      <result column="article_id" javaType="java.lang.Integer" jdbcType="INTEGER" property="articleId"/>
      <result column="title" javaType="java.lang.String" jdbcType="VARCHAR" property="title"/>
      <result column="content" property="content"></result>
      <result column="article_img" javaType="java.lang.String" jdbcType="VARCHAR" property="articleImg"/>
  </resultMap>


  <select id="getArticleByArticleId" resultMap="BaseResultMap">
    select * from article where article_id = #{article_id};
  </select>

  <insert id="addArticle" parameterType="Article">
    <selectKey resultType="_int" keyProperty="articleId" order="AFTER">
      select @@IDENTITY as articleId
    </selectKey>
    insert into article values(#{articleId},#{title},#{content},#{articleImg})
  </insert>

  <select id="listArticleIdByLikeTitle" resultType="Integer">
    select article_id from article where title like concat('%',#{title},'%');
  </select>

  <delete id="deleteArticleByArticleId" parameterType="Integer">
    delete from  article where article_id = #{articleId}
  </delete>

  <update id="updateArticleByArticleId" parameterType="Article">
    update article set title=#{title} ,content = #{content} where article_id = #{articleId}
  </update>

</mapper>